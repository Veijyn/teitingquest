{"version":3,"file":"src_app_views_scanner_scanner_module_ts.js","mappings":"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","sources":["./src/app/core/services/qr-action.service.ts","./src/app/views/scanner/scanner.component.ts","./src/app/views/scanner/scanner.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { QrActionMap } from '../../../data/qr-actions';\r\nimport { QrAction } from '../models/qr-action.model';\r\nimport { Item } from '../models/item.model';\r\nimport { InventoryService } from './inventory.service';\r\nimport { PlayerService } from './player.service';\r\nimport { SoundService } from './sound.service';\r\nimport { createEquipmentItems } from '@components/inventory/inventory.factory';\r\nimport { QuestService } from './quest.service';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class QrActionService {\r\n\r\n  constructor(\r\n    private playerService: PlayerService,\r\n    private inventoryService: InventoryService,\r\n    private soundService: SoundService,\r\n    private questService: QuestService // üëà hinzuf√ºgen\r\n  ) { }\r\n\r\n  handleQrCode(code: string): string {\r\n    let action: any;\r\n    try {\r\n      action = JSON.parse(code);\r\n    } catch {\r\n      return 'Ung√ºltiger QR-Code.';\r\n    }\r\n\r\n    if (!action.type) return 'Unbekannter QR-Code.';\r\n\r\n    switch (action.type) {\r\n      case 'heal':\r\n        if (!action.amount) return 'Heilwert fehlt.';\r\n        this.playerService.heal(action.amount);\r\n        this.soundService.playEffect('heal');\r\n        return action.description ?? `+${action.amount} HP geheilt.`;\r\n\r\n      case 'item':\r\n        const unlockeditem = this.inventoryService.unlockItemById(action.itemId);\r\n        const item = createEquipmentItems().find(i => i.id === action.itemId);\r\n        const nameitem = item?.name ?? action.itemId;\r\n\r\n        if (!unlockeditem) return `Item bereits freigeschaltet: ${nameitem}`;\r\n        this.soundService.playEffect('item-kaufen');\r\n        return `Item freigeschaltet: ${nameitem}`;\r\n\r\n     case 'quest':\r\n  const questId = action.questId ?? action.id; // ‚Üê fallback, falls im QR-Code nur \"id\" hei√üt\r\n\r\n  const quest = this.questService.getSnapshot().find(q => q.id === questId);\r\n  if (!quest) return 'Quest nicht gefunden.';\r\n\r\n  const alreadyAcquired = quest.acquired;\r\n  if (alreadyAcquired) return `Quest bereits erhalten: ${quest.title}`;\r\n\r\n  this.questService.markQuestAcquired(questId);\r\n  this.soundService.playEffect('quest-annahme');\r\n  return `Neue Quest erhalten: ${quest.title}`;\r\n\r\n\r\n      case 'startBattle':\r\n        return `Kampf gegen Boss gestartet: ${action.bossId}`;\r\n\r\n      default:\r\n        return 'Unbekannte Aktion.';\r\n    }\r\n\r\n  }\r\n\r\n}\r\n","import { Component } from '@angular/core';\r\nimport { QrActionService } from '@core/services/qr-action.service';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-scanner',\r\n  standalone: false,\r\n  template: `\r\n    <h2>QR-Code scannen</h2>\r\n<zxing-scanner (scanSuccess)=\"onScan($event)\"></zxing-scanner>\r\n<p *ngIf=\"message\">{{ message }}</p>\r\n\r\n<button class=\"rpg-button\" (click)=\"goBack()\">Zur√ºck</button>\r\n  `\r\n})\r\nexport class ScannerComponent {\r\n  message = '';\r\n\r\n  constructor(\r\n    private qrActionService: QrActionService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  onScan(result: string) {\r\n    this.message = this.qrActionService.handleQrCode(result);\r\n\r\n    // Optional: Auto zur√ºck nach 3 Sek.\r\n    setTimeout(() => this.router.navigate(['/game']), 3000);\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/game']);\r\n  }\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ScannerComponent } from './scanner.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { ZXingScannerModule } from '@zxing/ngx-scanner';\r\n\r\nconst routes: Routes = [{ path: '', component: ScannerComponent }];\r\n\r\n@NgModule({\r\n  declarations: [ScannerComponent],\r\n  imports: [CommonModule, RouterModule.forChild(routes), ZXingScannerModule]\r\n})\r\nexport class ScannerModule {}"],"names":["InventoryService","PlayerService","SoundService","createEquipmentItems","QuestService","QrActionService","playerService","inventoryService","soundService","questService","constructor","handleQrCode","code","action","JSON","parse","type","amount","heal","playEffect","description","unlockeditem","unlockItemById","itemId","item","find","i","id","nameitem","name","questId","quest","getSnapshot","q","alreadyAcquired","acquired","title","markQuestAcquired","bossId","i0","…µ…µinject","i1","i2","i3","i4","factory","…µfac","providedIn","Router","…µ…µelementStart","…µ…µtext","…µ…µelementEnd","…µ…µadvance","…µ…µtextInterpolate","ctx_r0","message","ScannerComponent","qrActionService","router","onScan","result","setTimeout","navigate","goBack","…µ…µdirectiveInject","selectors","decls","vars","consts","template","ScannerComponent_Template","rf","ctx","…µ…µlistener","ScannerComponent_Template_zxing_scanner_scanSuccess_2_listener","$event","…µ…µtemplate","ScannerComponent_p_3_Template","ScannerComponent_Template_button_click_4_listener","…µ…µproperty","CommonModule","RouterModule","ZXingScannerModule","routes","path","component","ScannerModule","forChild","declarations","imports"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}