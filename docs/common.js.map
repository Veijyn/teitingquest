{"version":3,"file":"common.js","mappings":"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","sources":["./src/app/components/inventory/inventory.factory.ts","./src/app/core/services/battle.service.ts","./src/app/core/services/boss.service.ts","./src/app/core/services/shop.service.ts","./src/app/core/utils/evaluate-condition.ts"],"sourcesContent":["import { Item } from '@core/models/item.model';\r\n\r\nexport function createEquipmentItems(): Item[] {\r\n  const now = new Date();\r\n\r\n  return [\r\n    {\r\n      id: 'belt',\r\n      slot: 'belt',\r\n      name: 'Starker Gürtel',\r\n      description: 'Ein stabiler Gürtel, der Haltung und Magie stärkt.',\r\n      icon: 'belt.svg',\r\n      type: 'equipment',\r\n      bonusStats: { hp: 1, agility: 1, intelligence: 1 },\r\n      acquiredAt: now,\r\n      questsRequired: 1,\r\n      available: false\r\n    },\r\n    {\r\n      id: 'helmet',\r\n      name: 'Mystischer Helm',\r\n      slot: 'head',\r\n      description: 'Eine verstärkte Kopfbedeckung für mutige Abenteurer.',\r\n      icon: 'helm.svg',\r\n      type: 'equipment',\r\n      bonusStats: { hp: 1, intelligence: 2 },\r\n      acquiredAt: now,\r\n      questsRequired: 5,\r\n      available: false\r\n    },\r\n    {\r\n      id: 'backmount',\r\n      slot: 'back',\r\n      name: 'Waffenhalterung',\r\n      description: 'Ermöglicht dir, deine Waffen noch schneller zu ziehen.',\r\n      icon: 'scheide.svg',\r\n      type: 'equipment',\r\n      bonusStats: { hp: 2, intelligence: 1 },\r\n      acquiredAt: now,\r\n      questsRequired: 10,\r\n      available: false\r\n    },\r\n    {\r\n      id: 'gloves',\r\n      slot: 'hands',\r\n      name: 'Kampfhandschuhe',\r\n      description: 'Stärken den Griff und den Schlag im Kampf.',\r\n      icon: 'gloves.svg',\r\n      type: 'equipment',\r\n      bonusStats: { hp: 2, strength: 1 },\r\n      acquiredAt: now,\r\n      questsRequired: 16,\r\n      available: false\r\n    },\r\n    {\r\n      id: 'pants',\r\n      slot: 'legs',\r\n      name: 'Bequeme Hose',\r\n      description: 'Bietet Beweglichkeit und etwas Schutz.',\r\n      icon: 'beine.svg',\r\n      type: 'equipment',\r\n      bonusStats: { hp: 5, agility: 1 },\r\n      acquiredAt: now,\r\n      questsRequired: 23,\r\n      available: false\r\n    },\r\n    {\r\n      id: 'chest',\r\n      slot: 'chest',\r\n      name: 'Brustpanzer',\r\n      description: 'Robuste Brustplatte gegen jegliche Gefahren.',\r\n      icon: 'brust.svg',\r\n      type: 'equipment',\r\n      bonusStats: { hp: 5, strength: 1 },\r\n      acquiredAt: now,\r\n      questsRequired: 31,\r\n      available: false\r\n    },\r\n    {\r\n      id: 'wrist',\r\n      slot: 'wrist',\r\n      name: 'Gelenkschützer',\r\n      description: 'Im Shop erhältlich – schützt und stärkt die Gelenke.',\r\n      icon: 'wrist.svg',\r\n      type: 'equipment',\r\n      bonusStats: { hp: 2, strength: 1 },\r\n      price: 40,\r\n      acquiredAt: now,\r\n      available: false\r\n    },\r\n    {\r\n      id: 'shoulder',\r\n      slot: 'shoulders',\r\n      name: 'Schulterplatte',\r\n      description: 'Kommt aus einer geheimnisvollen Lootbox.',\r\n      icon: 'schultern.svg',\r\n      type: 'equipment',\r\n      bonusStats: { hp: 3, agility: 1, intelligence: 1 },\r\n      acquiredAt: now,\r\n      available: false\r\n    },\r\n    {\r\n      id: 'boots',\r\n      slot: 'feet',\r\n      name: 'Verzauberte Stiefel',\r\n      description: 'Ein Schatz aus einem alten Haus – macht dich schneller.',\r\n      icon: 'boots.svg',\r\n      type: 'equipment',\r\n      bonusStats: { hp: 2, strength: 1, agility: 2 },\r\n      acquiredAt: now,\r\n      available: false\r\n    },\r\n    {\r\n      id: 'bastardsword',\r\n      slot: 'weapon',\r\n      name: 'Bastardschwert',\r\n      description: 'Erhalten durch Sieg gegen alle Triple-Triad-Spieler.',\r\n      icon: 'schwert.svg',\r\n      type: 'equipment',\r\n      bonusStats: { strength: 3, agility: 2, intelligence: 2 },\r\n      acquiredAt: now,\r\n      available: false\r\n    },\r\n    {\r\n      id: 'gunblade',\r\n      slot: 'weapon',\r\n      name: 'Gunblade',\r\n      description: 'Ultimative Waffe – nur durch das Sammeln aller Rüstungsteile.',\r\n      icon: 'schwert.svg',\r\n      type: 'equipment',\r\n      bonusStats: { strength: 7, agility: 5, intelligence: 5 },\r\n      acquiredAt: now,\r\n      available: false\r\n    }\r\n  ];\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { Boss } from '../models/boss.model';\r\nimport { GameState } from '../models/game-state.model';\r\nimport { Battle } from '../models/battle.model';\r\nimport { evaluateCondition } from '../utils/evaluate-condition';\r\nimport { Router } from '@angular/router';\r\nimport { PlayerService } from './player.service';\r\nimport { GameSaveService } from './game-save.service';\r\nimport { SoundService } from './sound.service';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class BattleService {\r\n  private currentBattle$ = new BehaviorSubject<Battle | null>(null);\r\n  private gameState!: GameState;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private playerService: PlayerService,\r\n    private gameSave: GameSaveService,\r\n    private soundService: SoundService\r\n  ) { }\r\n\r\n  setGameState(state: GameState) {\r\n    this.gameState = state;\r\n  }\r\n\r\n startBattle(bossId: string): void {\r\n  const boss = this.gameState.bosses.find(b => b.id === bossId);\r\n  if (!boss) return;\r\n\r\n  const effectivePlayerStats = this.playerService.getEffectiveStats();\r\n  if (!effectivePlayerStats) return;\r\n\r\n  const unlockedAdvantages = boss.advantages.filter(adv =>\r\n    evaluateCondition(adv.condition, effectivePlayerStats)\r\n  );\r\n\r\n  const battle: Battle = {\r\n    id: `${bossId}-${Date.now()}`,\r\n    bossId: boss.id,\r\n    advantagesUnlocked: unlockedAdvantages,\r\n    startedAt: new Date()\r\n  };\r\n\r\n  this.currentBattle$.next(battle);\r\n}\r\n\r\ngetGameState(): GameState {\r\n  return this.gameState;\r\n}\r\n\r\n  getCurrentBattle() {\r\n    return this.currentBattle$.asObservable();\r\n  }\r\n\r\n  async finishBattle(won: boolean): Promise<void> {\r\n    const battle = this.currentBattle$.value;\r\n    if (!battle) return;\r\n\r\n    battle.outcome = won ? 'win' : 'loss';\r\n    battle.finishedAt = new Date();\r\n\r\n    const boss = this.gameState.bosses.find(b => b.id === battle.bossId);\r\n    if (boss) {\r\n      if (won) {\r\n        boss.defeated = true;\r\n        //this.soundService.playEffect(\"boss-besiegt-quest-erfuellt\");\r\n      } else {                \r\n        boss.attempts = (boss.attempts || 0) + 1;\r\n        this.soundService.playEffect(\"hp-null\");\r\n      }\r\n    }\r\n\r\n    this.gameState.battles.push(battle);\r\n    this.currentBattle$.next(null);\r\n\r\n    await this.gameSave.updateCurrentGame();\r\n\r\n    this.router.navigate(['/game']);\r\n  }\r\n\r\n  getSnapshot(): Battle[] {\r\n    return this.gameState.battles;\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { Boss } from '../models/boss.model';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class BossService {\r\n  private bosses$ = new BehaviorSubject<Boss[]>([]);  \r\n  setBosses(bosses: Boss[]) {\r\n    this.bosses$.next([...bosses]);\r\n  }\r\n\r\n  getBosses() {\r\n    return this.bosses$.asObservable();\r\n  }\r\n\r\n  getSnapshot(): Boss[] {\r\n    return this.bosses$.value;\r\n  }\r\n}\r\n","// core/services/shop.service.ts\r\nimport { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { ShopItem } from '../models/item.model';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class ShopService {\r\n  private shopItems$ = new BehaviorSubject<ShopItem[]>([]);\r\n\r\n  setShopItems(items: ShopItem[]) {\r\n    this.shopItems$.next([...items]);\r\n  }\r\n\r\n  getShopItems() {\r\n    return this.shopItems$.asObservable();\r\n  }\r\n\r\n  updateStock(itemId: string, delta: number) {\r\n    const current = this.shopItems$.value;\r\n    const updated = current.map(item =>\r\n      item.id === itemId ? { ...item, stock: item.stock + delta } : item\r\n    );\r\n    this.shopItems$.next(updated);\r\n  }\r\n\r\n  getSnapshot(): ShopItem[] {\r\n    return this.shopItems$.value;\r\n  }\r\n}\r\n","import { AdvantageCondition } from '../models/boss.model';\r\nimport { PlayerStats } from '../models/player-stats.model';\r\n\r\nexport function evaluateCondition(conditions: AdvantageCondition[], stats: PlayerStats): boolean {\r\n  return conditions.every(cond => {\r\n    const statVal = stats[cond.stat];\r\n    if (typeof statVal !== 'number') return false;\r\n\r\n    switch (cond.operator) {\r\n      case '>=': return statVal >= cond.value;\r\n      case '<=': return statVal <= cond.value;\r\n      case '>': return statVal > cond.value;\r\n      case '<': return statVal < cond.value;\r\n      case '==': return statVal === cond.value;\r\n      case '!=': return statVal !== cond.value;\r\n      default: return false;\r\n    }\r\n  });\r\n}\r\n\r\n\r\n"],"names":["createEquipmentItems","now","Date","id","slot","name","description","icon","type","bonusStats","hp","agility","intelligence","acquiredAt","questsRequired","available","strength","price","BehaviorSubject","evaluateCondition","Router","PlayerService","GameSaveService","SoundService","BattleService","router","playerService","gameSave","soundService","currentBattle$","gameState","constructor","setGameState","state","startBattle","bossId","boss","bosses","find","b","effectivePlayerStats","getEffectiveStats","unlockedAdvantages","advantages","filter","adv","condition","battle","advantagesUnlocked","startedAt","next","getGameState","getCurrentBattle","asObservable","finishBattle","won","_this","_asyncToGenerator","value","outcome","finishedAt","defeated","attempts","playEffect","battles","push","updateCurrentGame","navigate","getSnapshot","i0","ɵɵinject","i1","i2","i3","i4","factory","ɵfac","providedIn","BossService","bosses$","setBosses","getBosses","ShopService","shopItems$","setShopItems","items","getShopItems","updateStock","itemId","delta","current","updated","map","item","stock","conditions","stats","every","cond","statVal","stat","operator"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}